MariaDB [db_kokumus]> SELECT
    ->     fi.found_id,
    ->     i.description AS item_description,
    ->     u.name        AS found_by_porter,
    ->     fi.date_found,
    ->     fi.is_collected,
    ->     l.address,
    ->     bl.building_name,
    ->     bl.floors,
    ->     rl.room_number,
    ->     ol.landmark,
    ->     ol.area_description
    -> FROM found_items fi
    -> JOIN items i ON fi.item_id = i.item_id
    -> JOIN porters p ON fi.porter_user_id = p.user_id
    -> JOIN users u ON p.user_id = u.user_id
    -> JOIN locations l ON fi.location_id = l.location_id
    -> LEFT JOIN building_locations bl ON l.location_id = bl.location_id
    -> LEFT JOIN room_locations rl ON l.location_id = rl.location_id
    -> LEFT JOIN outdoor_locations ol ON l.location_id = ol.location_id;
+----------+----------------------------+-----------------+------------+--------------+---------------+---------------+--------+----------------+----------+------------------+
| found_id | item_description           | found_by_porter | date_found | is_collected | address       | building_name | floors | room_number    | landmark | area_description |
+----------+----------------------------+-----------------+------------+--------------+---------------+---------------+--------+----------------+----------+------------------+
|        1 | blue jacket size m         | Peter Porter    | 2025-09-11 |            1 | Krupp College | NULL          |   NULL | QSA            | NULL     | NULL             |
|        2 | iphone with cracked screen | Nina Security   | 2025-01-02 |            0 | IRC           | NULL          |   NULL | College Office | NULL     | NULL             |
+----------+----------------------------+-----------------+------------+--------------+---------------+---------------+--------+----------------+----------+------------------+
2 rows in set (0.001 sec)

MariaDB [db_kokumus]> SELECT
    ->     fi.found_id,
    ->     i.description AS found_item_description,
    ->     lir.description AS reported_description,
    ->     stu_user.name AS reported_by_student,
    ->     porter_user.name AS handled_by_porter,
    ->     fi.collection_info,
    ->     fi.is_collected,
    ->     fi.date_found
    -> FROM found_items fi
    -> JOIN items i ON fi.item_id = i.item_id
    -> JOIN lost_item_reports lir ON fi.matched_report_id = lir.report_id
    -> JOIN students stu ON lir.student_user_id = stu.user_id
    -> JOIN users stu_user ON stu.user_id = stu_user.user_id
    -> JOIN porters por ON fi.porter_user_id = por.user_id
    -> JOIN users porter_user ON por.user_id = porter_user.user_id;
+----------+----------------------------+---------------------------+---------------------+-------------------+-------------------------+--------------+------------+
| found_id | found_item_description     | reported_description      | reported_by_student | handled_by_porter | collection_info         | is_collected | date_found |
+----------+----------------------------+---------------------------+---------------------+-------------------+-------------------------+--------------+------------+
|        1 | blue jacket size m         | lost blue jacket in krupp | Leonardo Dicaprio   | Peter Porter      | collect at krupp desk   |            1 | 2025-09-11 |
|        2 | iphone with cracked screen | lost phone in library     | Emma Watson         | Nina Security     | collect at irc security |            0 | 2025-01-02 |
+----------+----------------------------+---------------------------+---------------------+-------------------+-------------------------+--------------+------------+
2 rows in set (0.001 sec)

MariaDB [db_kokumus]> SELECT
    ->     lir.report_id,
    ->     lir.description AS lost_description,
    ->     lir.lost_date,
    ->     lir.lost_location,
    ->     stu_user.name AS student_name,
    ->     stu_user.email,
    ->     lir.contact_preference
    -> FROM lost_item_reports lir
    -> JOIN students stu ON lir.student_user_id = stu.user_id
    -> JOIN users stu_user ON stu.user_id = stu_user.user_id
    -> LEFT JOIN found_items fi ON fi.matched_report_id = lir.report_id
    -> WHERE fi.found_id IS NULL;
Empty set (0.000 sec)

MariaDB [db_kokumus]> SELECT
    ->     u.name AS porter_name,
    ->     COUNT(fi.found_id) AS total_found_items,
    ->     SUM(CASE WHEN fi.is_collected = 1 THEN 1 ELSE 0 END) AS collected_items
    -> FROM porters p
    -> JOIN users u ON p.user_id = u.user_id
    -> LEFT JOIN found_items fi ON fi.porter_user_id = p.user_id
    -> GROUP BY u.name
    -> HAVING COUNT(fi.found_id) > 0;
+---------------+-------------------+-----------------+
| porter_name   | total_found_items | collected_items |
+---------------+-------------------+-----------------+
| Nina Security |                 1 |               0 |
| Peter Porter  |                 1 |               1 |
+---------------+-------------------+-----------------+
2 rows in set (0.001 sec)

MariaDB [db_kokumus]> SELECT
    ->     l.location_id,
    ->     l.address,
    ->     bl.building_name,
    ->     rl.room_number,
    ->     ol.landmark,
    ->     COUNT(fi.found_id) AS items_found_count
    -> FROM locations l
    -> LEFT JOIN building_locations bl ON l.location_id = bl.location_id
    -> LEFT JOIN room_locations rl ON l.location_id = rl.location_id
    -> LEFT JOIN outdoor_locations ol ON l.location_id = ol.location_id
    -> LEFT JOIN found_items fi ON fi.location_id = l.location_id
    -> GROUP BY l.location_id, l.address, bl.building_name, rl.room_number, ol.landmark
    -> ORDER BY items_found_count DESC;
+-------------+------------------+------------------+----------------+------------------+-------------------+
| location_id | address          | building_name    | room_number    | landmark         | items_found_count |
+-------------+------------------+------------------+----------------+------------------+-------------------+
|           4 | IRC              | NULL             | College Office | NULL             |                 1 |
|           3 | Krupp College    | NULL             | QSA            | NULL             |                 1 |
|           2 | College Ring 7   | Mercator College | NULL           | NULL             |                 0 |
|           5 | Campus Green     | NULL             | NULL           | Campus Green     |                 0 |
|           1 | College Ring 6   | College III      | NULL           | NULL             |                 0 |
|           6 | Basketball Court | NULL             | NULL           | Basketball Court |                 0 |
+-------------+------------------+------------------+----------------+------------------+-------------------+
6 rows in set (0.000 sec)

MariaDB [db_kokumus]> SELECT
    ->     fi.found_id,
    ->     e.brand,
    ->     e.model,
    ->     i.description AS item_description,
    ->     u.name AS porter_name,
    ->     fi.date_found,
    ->     fi.is_collected,
    ->     fi.collection_info
    -> FROM found_items fi
    -> JOIN items i ON fi.item_id = i.item_id
    -> JOIN electronic_items e ON i.item_id = e.item_id
    -> JOIN porters p ON fi.porter_user_id = p.user_id
    -> JOIN users u ON p.user_id = u.user_id;
+----------+-------+-----------+----------------------------+---------------+------------+--------------+-------------------------+
| found_id | brand | model     | item_description           | porter_name   | date_found | is_collected | collection_info         |
+----------+-------+-----------+----------------------------+---------------+------------+--------------+-------------------------+
|        2 | Apple | iPhone 17 | iphone with cracked screen | Nina Security | 2025-01-02 |            0 | collect at irc security |
+----------+-------+-----------+----------------------------+---------------+------------+--------------+-------------------------+
1 row in set (0.000 sec)

MariaDB [db_kokumus]> SELECT
    ->     lir.report_id,
    ->     stu_user.name AS student_name,
    ->     lir.description AS student_report_description,
    ->     citem.brand,
    ->     citem.size,
    ->     citem.color,
    ->     fi.date_found,
    ->     fi.is_collected,
    ->     fi.collection_info
    -> FROM lost_item_reports lir
    -> JOIN found_items fi ON fi.matched_report_id = lir.report_id
    -> JOIN items it ON fi.item_id = it.item_id
    -> JOIN clothing_items citem ON it.item_id = citem.item_id
    -> JOIN students stu ON lir.student_user_id = stu.user_id
    -> JOIN users stu_user ON stu.user_id = stu_user.user_id;
+-----------+-------------------+----------------------------+-------+------+-------+------------+--------------+-----------------------+
| report_id | student_name      | student_report_description | brand | size | color | date_found | is_collected | collection_info       |
+-----------+-------------------+----------------------------+-------+------+-------+------------+--------------+-----------------------+
|         1 | Leonardo Dicaprio | lost blue jacket in krupp  | Nike  | M    | Blue  | 2025-09-11 |            1 | collect at krupp desk |
+-----------+-------------------+----------------------------+-------+------+-------+------------+--------------+-----------------------+
1 row in set (0.001 sec)

MariaDB [db_kokumus]> SELECT
    ->     fi.found_id,
    ->     i.description AS item_description,
    ->     fi.date_found,
    ->     fi.collection_info,
    ->     u.name AS porter_name,
    ->     u.phone AS porter_phone,
    ->     l.address,
    ->     bl.building_name,
    ->     rl.room_number,
    ->     ol.landmark
    -> FROM found_items fi
    -> JOIN items i ON fi.item_id = i.item_id
    -> JOIN porters p ON fi.porter_user_id = p.user_id
    -> JOIN users u ON p.user_id = u.user_id
    -> JOIN locations l ON fi.location_id = l.location_id
    -> LEFT JOIN building_locations bl ON l.location_id = bl.location_id
    -> LEFT JOIN room_locations rl ON l.location_id = rl.location_id
    -> LEFT JOIN outdoor_locations ol ON l.location_id = ol.location_id
    -> WHERE fi.is_collected = 0;
+----------+----------------------------+------------+-------------------------+---------------+---------------+---------+---------------+----------------+----------+
| found_id | item_description           | date_found | collection_info         | porter_name   | porter_phone  | address | building_name | room_number    | landmark |
+----------+----------------------------+------------+-------------------------+---------------+---------------+---------+---------------+----------------+----------+
|        2 | iphone with cracked screen | 2025-01-02 | collect at irc security | Nina Security | +491552222222 | IRC     | NULL          | College Office | NULL     |
+----------+----------------------------+------------+-------------------------+---------------+---------------+---------+---------------+----------------+----------+
1 row in set (0.001 sec)

MariaDB [db_kokumus]> SELECT
    ->     u.user_id,
    ->     u.name AS student_name,
    ->     COUNT(lir.report_id) AS total_reports
    -> FROM lost_item_reports lir
    -> JOIN users u ON lir.student_user_id = u.user_id
    -> GROUP BY u.user_id, u.name
    -> HAVING COUNT(lir.report_id) >= 2;
Empty set (0.000 sec)

MariaDB [db_kokumus]> notee;
